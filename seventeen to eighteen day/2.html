<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">    
    <title>IFE ECMAScript</title>
</head>
<body>        
    <input id="dec-number" type="number" placeholder="输入一个十进制非负整数">
    <input id="bin-bit" type="number" placeholder="输入转化后二进制数字位数">
    <button id="trans-btn">转化为二进制</button>
    <p id="result">运算结果</p>
    <script>

// 二进制转化 
function dec2bin(decNumber) {
  let remainder = decNumber
  let r = ''
  let tmpR = ''
  while (remainder > 0) {
    tmpR = remainder % 2
    remainder = Math.floor(remainder / 2)
    r = tmpR + r
  }
  return r
}

// 根据用户选择的bin-bit补齐位数
function bit(bin) {
  let userL = Number(document.getElementById('bin-bit').value)
  let l = bin.length
  if (userL === NaN) {
    alert('位数输入无效，请重新输入')
  } else {
    if(userL < l) console.log('您输入的位数小于实际位数')
    return bin.padStart(userL, '0')
  }
}

// 预处理保证十进制的数字有效
let dec = document.getElementById('dec-number')
let p = document.getElementById('result')
document.getElementById('trans-btn').addEventListener('click', function () {
  let n = Number(dec.value)
  if (dec.value === '' || n === NaN || n < 0) {
    dec.value = ''
    alert('输入无效，请重新输入')
  } else {
    p.innerHTML = '运算结果 ' + bit(dec2bin(n))
  }
})
    </script>
</body>
</html>
